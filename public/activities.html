<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon Tableau de Bord Strava</title>
    <style>
        /* ... (tous les styles CSS précédents restent les mêmes) ... */
        /* Ajout d'un style pour la couleur de la Forme */
        .form-green { color: #22c55e; }
        .form-blue { color: #3b82f6; }
        .form-red { color: #ef4444; }
    </style>
</head>
<body>
    <div class="main-container">
        <div id="status-container">...</div>
        <div id="content-wrapper" style="display: none;">
            <div class="dashboard-header">
                <h1>Mon Tableau de Bord</h1>
                <div class="goals-container" id="goals-container"></div>
            </div>

            <div id="fitness-summary-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                </div>

            <div class="card">
                </div>
            </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ... (logique fetch inchangée) ...
            fetch(/*...*/)
                .then(/*...*/)
                .then(({ ok, data }) => {
                    // ... (logique inchangée)
                    renderPage(data);
                });
        });

        function renderPage(data) {
            renderGoals(data.goals);
            renderFitnessSummary(data.fitness_summary); // On appelle la nouvelle fonction
            renderLatestActivity(data.activities, data.latest_activity_map, data.elevation_data);
            renderHistory(data.activities);
            lucide.createIcons();
        }

        // NOUVELLE FONCTION POUR LES STATS DE FORME
        function renderFitnessSummary(summary) {
            const container = document.getElementById('fitness-summary-container');
            if (!summary) return;
            
            const getFormClass = (form) => {
                if (form == null) return '';
                if (form > 5) return 'form-blue';
                if (form > -10) return 'form-green';
                return 'form-red';
            };

            container.innerHTML = `
                ${createSummaryCard('trending-up', 'Fitness (CTL)', summary.fitness)}
                ${createSummaryCard('flame', 'Fatigue (ATL)', summary.fatigue)}
                ${createSummaryCard('shield-check', 'Forme (TSB)', summary.form, getFormClass(summary.form))}
                ${createSummary_card('lungs', 'VO2max Estimée', summary.vo2max)}
            `;
        }

        function createSummaryCard(icon, title, value, valueClass = '') {
             return `
                <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                    <div class="flex justify-between items-center">
                        <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider">${title}</h3>
                        <i data-lucide="${icon}" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <p class="text-4xl font-extrabold text-gray-900 mt-2 ${valueClass}">${value ?? '-'}</p>
                </div>`;
        }
        
        // ... (toutes les autres fonctions JavaScript restent identiques)
        
    </script>
</body>
</html>